<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Scientific Color Tool</title>
  <style>
    .inputlabel {
      font-size: 20px;
    }

    .color {
      display: inline-block;
      padding: 20px 10px 0 20px;
    }

    .colorname {
      font-size: 1.4em;
      line-height: 2em;
    }

    .shadepreview {
      display: inline-block;
      height: 20px;
      width: 20px;
    }

    input {
      height: 30px;
      width: 100px;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <span class="inputlabel">Background:</span>
  <input id="input" placeholder="#abcdef" value="#ffffff"></input>
  <div id="palette"></div>

  <script>

    const palette = {
      "red": {
        "100": "#FAEEED",
        "200": "#F7E1DF",
        "300": "#EBB0AE",
        "400": "#DE817C",
        "500": "#CE5B54",
        "600": "#BD4840",
        "700": "#992C26",
        "800": "#781E19"
      },
      "orange": {
        "100": "#FBF5EE",
        "200": "#FBECDA",
        "300": "#F5D0A3",
        "400": "#ECA349",
        "500": "#D28628",
        "600": "#B96E12",
        "700": "#945810",
        "800": "#6E430D"
      },
      "yellow": {
        "100": "#FCFDE4",
        "200": "#F9FDAF",
        "300": "#E9ED72",
        "400": "#D1DB09",
        "500": "#BDC705",
        "600": "#AAB206",
        "700": "#848B05",
        "800": "#4C5002"
      },
      "green": {
        "100": "#DDF5E8",
        "200": "#C9F5DE",
        "300": "#9AE3BE",
        "400": "#4BC887",
        "500": "#2AB76E",
        "600": "#219459",
        "700": "#1B7647",
        "800": "#125030"
      },
      "cyan": {
        "100": "#E9F5F4",
        "200": "#C4F5F1",
        "300": "#7FEDE2",
        "400": "#02BCA9",
        "500": "#00AB9A",
        "600": "#008F81",
        "700": "#00695E",
        "800": "#00473F"
      },
      "blue": {
        "100": "#E5F2F6",
        "200": "#C0EAF6",
        "300": "#9DD8EE",
        "400": "#58B7DA",
        "500": "#2B9FC9",
        "600": "#0D7AA2",
        "700": "#085C7B",
        "800": "#04445B"
      },
      "purple": {
        "100": "#EDEFFA",
        "200": "#DAE0F2",
        "300": "#B8C4E6",
        "400": "#95ABDE",
        "500": "#698CD1",
        "600": "#466DAF",
        "700": "#294F89",
        "800": "#1D3A60"
      },
      "pink": {
        "100": "#F5EDF2",
        "200": "#F2DFEA",
        "300": "#E5B6D1",
        "400": "#D184B0",
        "500": "#C46A9D",
        "600": "#BF5290",
        "700": "#A83877",
        "800": "#8D1F5D"
      },
      "gray": {
        "100": "#F5F7FA",
        "150": "#EEF2F5",
        "200": "#E9EDF2",
        "250": "#DBE3EB",
        "300": "#CFDAE6",
        "350": "#B8C8D9",
        "400": "#A3B9CC",
        "450": "#869FB3",
        "500": "#6B8699",
        "550": "#466880",
        "600": "#2F5775",
        "650": "#204B6A",
        "700": "#144366",
        "750": "#093655",
        "800": "#072F4A",
        "850": "#052233",
        "000": "#FFFFFF",
        "999": "#000000"
      }
    };

    // ---------- TEMPLATE ----------

    const colorEntryTemplate = (shade, value) => `
      <div class="shade">
        <div class="shadepreview" style="background-color: ${value}"></div>
        <span class="shadename">${shade} - ${value}</span>
      </div>
    `;

    const paletteTemplate = (color, shades) => `
      <div class="color">
        <div class="colorname">${color}:</div>
        ${Object.entries(shades).map(([shade, value]) => colorEntryTemplate(shade, value)).join('')}
      </div>
    `;

    const innerHTML = Object.entries(palette).map(([color, shades]) => paletteTemplate(color, shades)).join('');

    document.getElementById('palette').innerHTML = innerHTML;

    // ---------- INTERACTION ----------

    const getRgbPart = (value, offset) => parseInt(value.slice(offset, offset + 2), 16);
    const isValid = (value) => /#[0-9a-f]{6}/i.test(value);
    const isDark = (value) => (getRgbPart(value, 1) + getRgbPart(value, 3) + getRgbPart(value, 5)) / 3 < 256 / 2;

    const applyColor = () => {
      const value = document.getElementById('input').value;
      const body = document.querySelector('body');
      if (!isValid(value)) return;
      body.style.backgroundColor = value;
      body.style.color = isDark(value) ? '#ffffff' : '#000000';
    }

    const input = document.getElementById('input');
    input.addEventListener('input', applyColor);
    input.focus();
    input.setSelectionRange(input.value.length, input.value.length);

  </script>
</body>
</html>
